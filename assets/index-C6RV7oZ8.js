(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function c(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(t){if(t.ep)return;t.ep=!0;const e=c(t);fetch(t.href,e)}})();function pe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var V={},ot,Lt;function Ee(){return Lt||(Lt=1,ot=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ot}var rt={},F={},Mt;function $(){if(Mt)return F;Mt=1;let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return F.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},F.getSymbolTotalCodewords=function(o){return r[o]},F.getBCHDigit=function(c){let o=0;for(;c!==0;)o++,c>>>=1;return o},F.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');n=o},F.isKanjiModeEnabled=function(){return typeof n<"u"},F.toSJIS=function(o){return n(o)},F}var it={},Ot;function St(){return Ot||(Ot=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function r(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+c)}}n.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},n.from=function(o,t){if(n.isValid(o))return o;try{return r(o)}catch{return t}}}(it)),it}var at,Dt;function ye(){if(Dt)return at;Dt=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(r){const c=Math.floor(r/8);return(this.buffer[c]>>>7-r%8&1)===1},put:function(r,c){for(let o=0;o<c;o++)this.putBit((r>>>c-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0),r&&(this.buffer[c]|=128>>>this.length%8),this.length++}},at=n,at}var st,_t;function Ae(){if(_t)return st;_t=1;function n(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return n.prototype.set=function(r,c,o,t){const e=r*this.size+c;this.data[e]=o,t&&(this.reservedBit[e]=!0)},n.prototype.get=function(r,c){return this.data[r*this.size+c]},n.prototype.xor=function(r,c,o){this.data[r*this.size+c]^=o},n.prototype.isReserved=function(r,c){return this.reservedBit[r*this.size+c]},st=n,st}var ct={},qt;function we(){return qt||(qt=1,function(n){const r=$().getSymbolSize;n.getRowColCoords=function(o){if(o===1)return[];const t=Math.floor(o/7)+2,e=r(o),a=e===145?26:Math.ceil((e-13)/(2*t-2))*2,i=[e-7];for(let s=1;s<t-1;s++)i[s]=i[s-1]-a;return i.push(6),i.reverse()},n.getPositions=function(o){const t=[],e=n.getRowColCoords(o),a=e.length;for(let i=0;i<a;i++)for(let s=0;s<a;s++)i===0&&s===0||i===0&&s===a-1||i===a-1&&s===0||t.push([e[i],e[s]]);return t}}(ct)),ct}var ut={},Ut;function Te(){if(Ut)return ut;Ut=1;const n=$().getSymbolSize,r=7;return ut.getPositions=function(o){const t=n(o);return[[0,0],[t-r,0],[0,t-r]]},ut}var lt={},Kt;function Ie(){return Kt||(Kt=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};n.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},n.from=function(t){return n.isValid(t)?parseInt(t,10):void 0},n.getPenaltyN1=function(t){const e=t.size;let a=0,i=0,s=0,u=null,l=null;for(let m=0;m<e;m++){i=s=0,u=l=null;for(let d=0;d<e;d++){let f=t.get(m,d);f===u?i++:(i>=5&&(a+=r.N1+(i-5)),u=f,i=1),f=t.get(d,m),f===l?s++:(s>=5&&(a+=r.N1+(s-5)),l=f,s=1)}i>=5&&(a+=r.N1+(i-5)),s>=5&&(a+=r.N1+(s-5))}return a},n.getPenaltyN2=function(t){const e=t.size;let a=0;for(let i=0;i<e-1;i++)for(let s=0;s<e-1;s++){const u=t.get(i,s)+t.get(i,s+1)+t.get(i+1,s)+t.get(i+1,s+1);(u===4||u===0)&&a++}return a*r.N2},n.getPenaltyN3=function(t){const e=t.size;let a=0,i=0,s=0;for(let u=0;u<e;u++){i=s=0;for(let l=0;l<e;l++)i=i<<1&2047|t.get(u,l),l>=10&&(i===1488||i===93)&&a++,s=s<<1&2047|t.get(l,u),l>=10&&(s===1488||s===93)&&a++}return a*r.N3},n.getPenaltyN4=function(t){let e=0;const a=t.data.length;for(let s=0;s<a;s++)e+=t.data[s];return Math.abs(Math.ceil(e*100/a/5)-10)*r.N4};function c(o,t,e){switch(o){case n.Patterns.PATTERN000:return(t+e)%2===0;case n.Patterns.PATTERN001:return t%2===0;case n.Patterns.PATTERN010:return e%3===0;case n.Patterns.PATTERN011:return(t+e)%3===0;case n.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case n.Patterns.PATTERN101:return t*e%2+t*e%3===0;case n.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case n.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}n.applyMask=function(t,e){const a=e.size;for(let i=0;i<a;i++)for(let s=0;s<a;s++)e.isReserved(s,i)||e.xor(s,i,c(t,s,i))},n.getBestMask=function(t,e){const a=Object.keys(n.Patterns).length;let i=0,s=1/0;for(let u=0;u<a;u++){e(u),n.applyMask(u,t);const l=n.getPenaltyN1(t)+n.getPenaltyN2(t)+n.getPenaltyN3(t)+n.getPenaltyN4(t);n.applyMask(u,t),l<s&&(s=l,i=u)}return i}}(lt)),lt}var W={},Ft;function ce(){if(Ft)return W;Ft=1;const n=St(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],c=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return W.getBlocksCount=function(t,e){switch(e){case n.L:return r[(t-1)*4+0];case n.M:return r[(t-1)*4+1];case n.Q:return r[(t-1)*4+2];case n.H:return r[(t-1)*4+3];default:return}},W.getTotalCodewordsCount=function(t,e){switch(e){case n.L:return c[(t-1)*4+0];case n.M:return c[(t-1)*4+1];case n.Q:return c[(t-1)*4+2];case n.H:return c[(t-1)*4+3];default:return}},W}var dt={},Y={},Ht;function Be(){if(Ht)return Y;Ht=1;const n=new Uint8Array(512),r=new Uint8Array(256);return function(){let o=1;for(let t=0;t<255;t++)n[t]=o,r[o]=t,o<<=1,o&256&&(o^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),Y.log=function(o){if(o<1)throw new Error("log("+o+")");return r[o]},Y.exp=function(o){return n[o]},Y.mul=function(o,t){return o===0||t===0?0:n[r[o]+r[t]]},Y}var $t;function Re(){return $t||($t=1,function(n){const r=Be();n.mul=function(o,t){const e=new Uint8Array(o.length+t.length-1);for(let a=0;a<o.length;a++)for(let i=0;i<t.length;i++)e[a+i]^=r.mul(o[a],t[i]);return e},n.mod=function(o,t){let e=new Uint8Array(o);for(;e.length-t.length>=0;){const a=e[0];for(let s=0;s<t.length;s++)e[s]^=r.mul(t[s],a);let i=0;for(;i<e.length&&e[i]===0;)i++;e=e.slice(i)}return e},n.generateECPolynomial=function(o){let t=new Uint8Array([1]);for(let e=0;e<o;e++)t=n.mul(t,new Uint8Array([1,r.exp(e)]));return t}}(dt)),dt}var ft,zt;function Ce(){if(zt)return ft;zt=1;const n=Re();function r(c){this.genPoly=void 0,this.degree=c,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(o){this.degree=o,this.genPoly=n.generateECPolynomial(this.degree)},r.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(o.length+this.degree);t.set(o);const e=n.mod(t,this.genPoly),a=this.degree-e.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(e,a),i}return e},ft=r,ft}var mt={},gt={},ht={},Qt;function ue(){return Qt||(Qt=1,ht.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),ht}var D={},Vt;function le(){if(Vt)return D;Vt=1;const n="[0-9]+",r="[A-Z $%*+\\-./:]+";let c="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";c=c.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+c+`)(?:.|[\r
]))+`;D.KANJI=new RegExp(c,"g"),D.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),D.BYTE=new RegExp(o,"g"),D.NUMERIC=new RegExp(n,"g"),D.ALPHANUMERIC=new RegExp(r,"g");const t=new RegExp("^"+c+"$"),e=new RegExp("^"+n+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return D.testKanji=function(s){return t.test(s)},D.testNumeric=function(s){return e.test(s)},D.testAlphanumeric=function(s){return a.test(s)},D}var jt;function z(){return jt||(jt=1,function(n){const r=ue(),c=le();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(e,a){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?e.ccBits[0]:a<27?e.ccBits[1]:e.ccBits[2]},n.getBestModeForData=function(e){return c.testNumeric(e)?n.NUMERIC:c.testAlphanumeric(e)?n.ALPHANUMERIC:c.testKanji(e)?n.KANJI:n.BYTE},n.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},n.isValid=function(e){return e&&e.bit&&e.ccBits};function o(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+t)}}n.from=function(e,a){if(n.isValid(e))return e;try{return o(e)}catch{return a}}}(gt)),gt}var Yt;function ve(){return Yt||(Yt=1,function(n){const r=$(),c=ce(),o=St(),t=z(),e=ue(),a=7973,i=r.getBCHDigit(a);function s(d,f,g){for(let h=1;h<=40;h++)if(f<=n.getCapacity(h,g,d))return h}function u(d,f){return t.getCharCountIndicator(d,f)+4}function l(d,f){let g=0;return d.forEach(function(h){const b=u(h.mode,f);g+=b+h.getBitsLength()}),g}function m(d,f){for(let g=1;g<=40;g++)if(l(d,g)<=n.getCapacity(g,f,t.MIXED))return g}n.from=function(f,g){return e.isValid(f)?parseInt(f,10):g},n.getCapacity=function(f,g,h){if(!e.isValid(f))throw new Error("Invalid QR Code version");typeof h>"u"&&(h=t.BYTE);const b=r.getSymbolTotalCodewords(f),B=c.getTotalCodewordsCount(f,g),S=(b-B)*8;if(h===t.MIXED)return S;const C=S-u(h,f);switch(h){case t.NUMERIC:return Math.floor(C/10*3);case t.ALPHANUMERIC:return Math.floor(C/11*2);case t.KANJI:return Math.floor(C/13);case t.BYTE:default:return Math.floor(C/8)}},n.getBestVersionForData=function(f,g){let h;const b=o.from(g,o.M);if(Array.isArray(f)){if(f.length>1)return m(f,b);if(f.length===0)return 1;h=f[0]}else h=f;return s(h.mode,h.getLength(),b)},n.getEncodedBits=function(f){if(!e.isValid(f)||f<7)throw new Error("Invalid QR Code version");let g=f<<12;for(;r.getBCHDigit(g)-i>=0;)g^=a<<r.getBCHDigit(g)-i;return f<<12|g}}(mt)),mt}var pt={},Jt;function Se(){if(Jt)return pt;Jt=1;const n=$(),r=1335,c=21522,o=n.getBCHDigit(r);return pt.getEncodedBits=function(e,a){const i=e.bit<<3|a;let s=i<<10;for(;n.getBCHDigit(s)-o>=0;)s^=r<<n.getBCHDigit(s)-o;return(i<<10|s)^c},pt}var Et={},yt,Gt;function ke(){if(Gt)return yt;Gt=1;const n=z();function r(c){this.mode=n.NUMERIC,this.data=c.toString()}return r.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){let t,e,a;for(t=0;t+3<=this.data.length;t+=3)e=this.data.substr(t,3),a=parseInt(e,10),o.put(a,10);const i=this.data.length-t;i>0&&(e=this.data.substr(t),a=parseInt(e,10),o.put(a,i*3+1))},yt=r,yt}var At,Zt;function Pe(){if(Zt)return At;Zt=1;const n=z(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function c(o){this.mode=n.ALPHANUMERIC,this.data=o}return c.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let a=r.indexOf(this.data[e])*45;a+=r.indexOf(this.data[e+1]),t.put(a,11)}this.data.length%2&&t.put(r.indexOf(this.data[e]),6)},At=c,At}var wt,Wt;function be(){if(Wt)return wt;Wt=1;const n=z();function r(c){this.mode=n.BYTE,typeof c=="string"?this.data=new TextEncoder().encode(c):this.data=new Uint8Array(c)}return r.getBitsLength=function(o){return o*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(c){for(let o=0,t=this.data.length;o<t;o++)c.put(this.data[o],8)},wt=r,wt}var Tt,Xt;function Ne(){if(Xt)return Tt;Xt=1;const n=z(),r=$();function c(o){this.mode=n.KANJI,this.data=o}return c.getBitsLength=function(t){return t*13},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(o){let t;for(t=0;t<this.data.length;t++){let e=r.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),o.put(e,13)}},Tt=c,Tt}var It={exports:{}},xt;function Le(){return xt||(xt=1,function(n){var r={single_source_shortest_paths:function(c,o,t){var e={},a={};a[o]=0;var i=r.PriorityQueue.make();i.push(o,0);for(var s,u,l,m,d,f,g,h,b;!i.empty();){s=i.pop(),u=s.value,m=s.cost,d=c[u]||{};for(l in d)d.hasOwnProperty(l)&&(f=d[l],g=m+f,h=a[l],b=typeof a[l]>"u",(b||h>g)&&(a[l]=g,i.push(l,g),e[l]=u))}if(typeof t<"u"&&typeof a[t]>"u"){var B=["Could not find a path from ",o," to ",t,"."].join("");throw new Error(B)}return e},extract_shortest_path_from_predecessor_list:function(c,o){for(var t=[],e=o;e;)t.push(e),c[e],e=c[e];return t.reverse(),t},find_path:function(c,o,t){var e=r.single_source_shortest_paths(c,o,t);return r.extract_shortest_path_from_predecessor_list(e,t)},PriorityQueue:{make:function(c){var o=r.PriorityQueue,t={},e;c=c||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);return t.queue=[],t.sorter=c.sorter||o.default_sorter,t},default_sorter:function(c,o){return c.cost-o.cost},push:function(c,o){var t={value:c,cost:o};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=r}(It)),It.exports}var te;function Me(){return te||(te=1,function(n){const r=z(),c=ke(),o=Pe(),t=be(),e=Ne(),a=le(),i=$(),s=Le();function u(B){return unescape(encodeURIComponent(B)).length}function l(B,S,C){const R=[];let L;for(;(L=B.exec(C))!==null;)R.push({data:L[0],index:L.index,mode:S,length:L[0].length});return R}function m(B){const S=l(a.NUMERIC,r.NUMERIC,B),C=l(a.ALPHANUMERIC,r.ALPHANUMERIC,B);let R,L;return i.isKanjiModeEnabled()?(R=l(a.BYTE,r.BYTE,B),L=l(a.KANJI,r.KANJI,B)):(R=l(a.BYTE_KANJI,r.BYTE,B),L=[]),S.concat(C,R,L).sort(function(T,w){return T.index-w.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function d(B,S){switch(S){case r.NUMERIC:return c.getBitsLength(B);case r.ALPHANUMERIC:return o.getBitsLength(B);case r.KANJI:return e.getBitsLength(B);case r.BYTE:return t.getBitsLength(B)}}function f(B){return B.reduce(function(S,C){const R=S.length-1>=0?S[S.length-1]:null;return R&&R.mode===C.mode?(S[S.length-1].data+=C.data,S):(S.push(C),S)},[])}function g(B){const S=[];for(let C=0;C<B.length;C++){const R=B[C];switch(R.mode){case r.NUMERIC:S.push([R,{data:R.data,mode:r.ALPHANUMERIC,length:R.length},{data:R.data,mode:r.BYTE,length:R.length}]);break;case r.ALPHANUMERIC:S.push([R,{data:R.data,mode:r.BYTE,length:R.length}]);break;case r.KANJI:S.push([R,{data:R.data,mode:r.BYTE,length:u(R.data)}]);break;case r.BYTE:S.push([{data:R.data,mode:r.BYTE,length:u(R.data)}])}}return S}function h(B,S){const C={},R={start:{}};let L=["start"];for(let E=0;E<B.length;E++){const T=B[E],w=[];for(let p=0;p<T.length;p++){const v=T[p],y=""+E+p;w.push(y),C[y]={node:v,lastCount:0},R[y]={};for(let I=0;I<L.length;I++){const A=L[I];C[A]&&C[A].node.mode===v.mode?(R[A][y]=d(C[A].lastCount+v.length,v.mode)-d(C[A].lastCount,v.mode),C[A].lastCount+=v.length):(C[A]&&(C[A].lastCount=v.length),R[A][y]=d(v.length,v.mode)+4+r.getCharCountIndicator(v.mode,S))}}L=w}for(let E=0;E<L.length;E++)R[L[E]].end=0;return{map:R,table:C}}function b(B,S){let C;const R=r.getBestModeForData(B);if(C=r.from(S,R),C!==r.BYTE&&C.bit<R.bit)throw new Error('"'+B+'" cannot be encoded with mode '+r.toString(C)+`.
 Suggested mode is: `+r.toString(R));switch(C===r.KANJI&&!i.isKanjiModeEnabled()&&(C=r.BYTE),C){case r.NUMERIC:return new c(B);case r.ALPHANUMERIC:return new o(B);case r.KANJI:return new e(B);case r.BYTE:return new t(B)}}n.fromArray=function(S){return S.reduce(function(C,R){return typeof R=="string"?C.push(b(R,null)):R.data&&C.push(b(R.data,R.mode)),C},[])},n.fromString=function(S,C){const R=m(S,i.isKanjiModeEnabled()),L=g(R),E=h(L,C),T=s.find_path(E.map,"start","end"),w=[];for(let p=1;p<T.length-1;p++)w.push(E.table[T[p]].node);return n.fromArray(f(w))},n.rawSplit=function(S){return n.fromArray(m(S,i.isKanjiModeEnabled()))}}(Et)),Et}var ee;function Oe(){if(ee)return rt;ee=1;const n=$(),r=St(),c=ye(),o=Ae(),t=we(),e=Te(),a=Ie(),i=ce(),s=Ce(),u=ve(),l=Se(),m=z(),d=Me();function f(E,T){const w=E.size,p=e.getPositions(T);for(let v=0;v<p.length;v++){const y=p[v][0],I=p[v][1];for(let A=-1;A<=7;A++)if(!(y+A<=-1||w<=y+A))for(let k=-1;k<=7;k++)I+k<=-1||w<=I+k||(A>=0&&A<=6&&(k===0||k===6)||k>=0&&k<=6&&(A===0||A===6)||A>=2&&A<=4&&k>=2&&k<=4?E.set(y+A,I+k,!0,!0):E.set(y+A,I+k,!1,!0))}}function g(E){const T=E.size;for(let w=8;w<T-8;w++){const p=w%2===0;E.set(w,6,p,!0),E.set(6,w,p,!0)}}function h(E,T){const w=t.getPositions(T);for(let p=0;p<w.length;p++){const v=w[p][0],y=w[p][1];for(let I=-2;I<=2;I++)for(let A=-2;A<=2;A++)I===-2||I===2||A===-2||A===2||I===0&&A===0?E.set(v+I,y+A,!0,!0):E.set(v+I,y+A,!1,!0)}}function b(E,T){const w=E.size,p=u.getEncodedBits(T);let v,y,I;for(let A=0;A<18;A++)v=Math.floor(A/3),y=A%3+w-8-3,I=(p>>A&1)===1,E.set(v,y,I,!0),E.set(y,v,I,!0)}function B(E,T,w){const p=E.size,v=l.getEncodedBits(T,w);let y,I;for(y=0;y<15;y++)I=(v>>y&1)===1,y<6?E.set(y,8,I,!0):y<8?E.set(y+1,8,I,!0):E.set(p-15+y,8,I,!0),y<8?E.set(8,p-y-1,I,!0):y<9?E.set(8,15-y-1+1,I,!0):E.set(8,15-y-1,I,!0);E.set(p-8,8,1,!0)}function S(E,T){const w=E.size;let p=-1,v=w-1,y=7,I=0;for(let A=w-1;A>0;A-=2)for(A===6&&A--;;){for(let k=0;k<2;k++)if(!E.isReserved(v,A-k)){let K=!1;I<T.length&&(K=(T[I]>>>y&1)===1),E.set(v,A-k,K),y--,y===-1&&(I++,y=7)}if(v+=p,v<0||w<=v){v-=p,p=-p;break}}}function C(E,T,w){const p=new c;w.forEach(function(k){p.put(k.mode.bit,4),p.put(k.getLength(),m.getCharCountIndicator(k.mode,E)),k.write(p)});const v=n.getSymbolTotalCodewords(E),y=i.getTotalCodewordsCount(E,T),I=(v-y)*8;for(p.getLengthInBits()+4<=I&&p.put(0,4);p.getLengthInBits()%8!==0;)p.putBit(0);const A=(I-p.getLengthInBits())/8;for(let k=0;k<A;k++)p.put(k%2?17:236,8);return R(p,E,T)}function R(E,T,w){const p=n.getSymbolTotalCodewords(T),v=i.getTotalCodewordsCount(T,w),y=p-v,I=i.getBlocksCount(T,w),A=p%I,k=I-A,K=Math.floor(p/I),j=Math.floor(y/I),me=j+1,Pt=K-j,ge=new s(Pt);let x=0;const Z=new Array(I),bt=new Array(I);let tt=0;const he=new Uint8Array(E.buffer);for(let Q=0;Q<I;Q++){const nt=Q<k?j:me;Z[Q]=he.slice(x,x+nt),bt[Q]=ge.encode(Z[Q]),x+=nt,tt=Math.max(tt,nt)}const et=new Uint8Array(p);let Nt=0,q,U;for(q=0;q<tt;q++)for(U=0;U<I;U++)q<Z[U].length&&(et[Nt++]=Z[U][q]);for(q=0;q<Pt;q++)for(U=0;U<I;U++)et[Nt++]=bt[U][q];return et}function L(E,T,w,p){let v;if(Array.isArray(E))v=d.fromArray(E);else if(typeof E=="string"){let K=T;if(!K){const j=d.rawSplit(E);K=u.getBestVersionForData(j,w)}v=d.fromString(E,K||40)}else throw new Error("Invalid data");const y=u.getBestVersionForData(v,w);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(!T)T=y;else if(T<y)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+y+`.
`);const I=C(T,w,v),A=n.getSymbolSize(T),k=new o(A);return f(k,T),g(k),h(k,T),B(k,w,0),T>=7&&b(k,T),S(k,I),isNaN(p)&&(p=a.getBestMask(k,B.bind(null,k,w))),a.applyMask(p,k),B(k,w,p),{modules:k,version:T,errorCorrectionLevel:w,maskPattern:p,segments:v}}return rt.create=function(T,w){if(typeof T>"u"||T==="")throw new Error("No input text");let p=r.M,v,y;return typeof w<"u"&&(p=r.from(w.errorCorrectionLevel,r.M),v=u.from(w.version),y=a.from(w.maskPattern),w.toSJISFunc&&n.setToSJISFunction(w.toSJISFunc)),L(T,v,p,y)},rt}var Bt={},Rt={},ne;function de(){return ne||(ne=1,function(n){function r(c){if(typeof c=="number"&&(c=c.toString()),typeof c!="string")throw new Error("Color should be defined as hex string");let o=c.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+c);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(e){return[e,e]}))),o.length===6&&o.push("F","F");const t=parseInt(o.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+o.slice(0,6).join("")}}n.getOptions=function(o){o||(o={}),o.color||(o.color={});const t=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,e=o.width&&o.width>=21?o.width:void 0,a=o.scale||4;return{width:e,scale:e?4:a,margin:t,color:{dark:r(o.color.dark||"#000000ff"),light:r(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},n.getScale=function(o,t){return t.width&&t.width>=o+t.margin*2?t.width/(o+t.margin*2):t.scale},n.getImageWidth=function(o,t){const e=n.getScale(o,t);return Math.floor((o+t.margin*2)*e)},n.qrToImageData=function(o,t,e){const a=t.modules.size,i=t.modules.data,s=n.getScale(a,e),u=Math.floor((a+e.margin*2)*s),l=e.margin*s,m=[e.color.light,e.color.dark];for(let d=0;d<u;d++)for(let f=0;f<u;f++){let g=(d*u+f)*4,h=e.color.light;if(d>=l&&f>=l&&d<u-l&&f<u-l){const b=Math.floor((d-l)/s),B=Math.floor((f-l)/s);h=m[i[b*a+B]?1:0]}o[g++]=h.r,o[g++]=h.g,o[g++]=h.b,o[g]=h.a}}}(Rt)),Rt}var oe;function De(){return oe||(oe=1,function(n){const r=de();function c(t,e,a){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=a,e.width=a,e.style.height=a+"px",e.style.width=a+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(e,a,i){let s=i,u=a;typeof s>"u"&&(!a||!a.getContext)&&(s=a,a=void 0),a||(u=o()),s=r.getOptions(s);const l=r.getImageWidth(e.modules.size,s),m=u.getContext("2d"),d=m.createImageData(l,l);return r.qrToImageData(d.data,e,s),c(m,u,l),m.putImageData(d,0,0),u},n.renderToDataURL=function(e,a,i){let s=i;typeof s>"u"&&(!a||!a.getContext)&&(s=a,a=void 0),s||(s={});const u=n.render(e,a,s),l=s.type||"image/png",m=s.rendererOpts||{};return u.toDataURL(l,m.quality)}}(Bt)),Bt}var Ct={},re;function _e(){if(re)return Ct;re=1;const n=de();function r(t,e){const a=t.a/255,i=e+'="'+t.hex+'"';return a<1?i+" "+e+'-opacity="'+a.toFixed(2).slice(1)+'"':i}function c(t,e,a){let i=t+e;return typeof a<"u"&&(i+=" "+a),i}function o(t,e,a){let i="",s=0,u=!1,l=0;for(let m=0;m<t.length;m++){const d=Math.floor(m%e),f=Math.floor(m/e);!d&&!u&&(u=!0),t[m]?(l++,m>0&&d>0&&t[m-1]||(i+=u?c("M",d+a,.5+f+a):c("m",s,0),s=0,u=!1),d+1<e&&t[m+1]||(i+=c("h",l),l=0)):s++}return i}return Ct.render=function(e,a,i){const s=n.getOptions(a),u=e.modules.size,l=e.modules.data,m=u+s.margin*2,d=s.color.light.a?"<path "+r(s.color.light,"fill")+' d="M0 0h'+m+"v"+m+'H0z"/>':"",f="<path "+r(s.color.dark,"stroke")+' d="'+o(l,u,s.margin)+'"/>',g='viewBox="0 0 '+m+" "+m+'"',b='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+g+' shape-rendering="crispEdges">'+d+f+`</svg>
`;return typeof i=="function"&&i(null,b),b},Ct}var ie;function qe(){if(ie)return V;ie=1;const n=Ee(),r=Oe(),c=De(),o=_e();function t(e,a,i,s,u){const l=[].slice.call(arguments,1),m=l.length,d=typeof l[m-1]=="function";if(!d&&!n())throw new Error("Callback required as last argument");if(d){if(m<2)throw new Error("Too few arguments provided");m===2?(u=i,i=a,a=s=void 0):m===3&&(a.getContext&&typeof u>"u"?(u=s,s=void 0):(u=s,s=i,i=a,a=void 0))}else{if(m<1)throw new Error("Too few arguments provided");return m===1?(i=a,a=s=void 0):m===2&&!a.getContext&&(s=i,i=a,a=void 0),new Promise(function(f,g){try{const h=r.create(i,s);f(e(h,a,s))}catch(h){g(h)}})}try{const f=r.create(i,s);u(null,e(f,a,s))}catch(f){u(f)}}return V.create=r.create,V.toCanvas=t.bind(null,c.render),V.toDataURL=t.bind(null,c.renderToDataURL),V.toString=t.bind(null,function(e,a,i){return o.render(e,i)}),V}var Ue=qe();const Ke=pe(Ue),fe={HOSTNAME:/^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?)*$/,PORT:/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/};function vt(n,r){let c;return function(...t){const e=()=>{clearTimeout(c),n.apply(this,t)};clearTimeout(c),c=setTimeout(e,r)}}function H(n){const r=document.createElement("div");return r.textContent=n,r.innerHTML}function X(n){if(!n||typeof n!="string")return"";try{const r=n.trim(),c=r.startsWith("http")?r:`https://${r}`;return new URL(c).hostname}catch{const r=n.trim().replace(/^https?:\/\//,"").split("/"),[c]=r,[o]=c.split(":");return o||""}}function ae(n){return n?/^(\d{1,3}\.){3}\d{1,3}$/.test(n)?n.split(".").every(o=>parseInt(o)>=0&&parseInt(o)<=255):fe.HOSTNAME.test(n):!1}function Fe(n){return fe.PORT.test(String(n))}function He(n){try{return new URL(n),!0}catch{return!1}}const P={STORAGE_KEY:"tak-profiles",TABS:{ATAK:"atak",ITAK:"itak",IMPORT:"import",PROFILES:"profiles",HELP:"help"},PROTOCOLS:{HTTPS:"https",HTTP:"http",SSL:"ssl",TCP:"tcp"},NOTIFICATION_DURATION:3e3,STATUS_DURATION:5e3,DEBOUNCE_DELAY:300,QR_SIZE:256,QR_MARGIN:2,PATTERNS:{HOSTNAME:/^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?)*$/,PORT:/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,URL:/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)$/}},M={PROFILE_NAME_REQUIRED:"Profile name is required",PROFILE_EXISTS:"A profile with this name already exists. Do you want to overwrite it?",INVALID_HOSTNAME:"Please enter a valid hostname or IP address",INVALID_PORT:"Please enter a valid port number (1-65535)",INVALID_URL:"Please enter a valid URL",QR_GENERATION_ERROR:"Error generating QR code",DOWNLOAD_ERROR:"Error downloading QR code",CLIPBOARD_ERROR:"Error copying to clipboard",LOAD_PROFILES_ERROR:"Error loading profiles"},_=function(){let n=P.TABS.ATAK;function r(){document.querySelectorAll(".tab-btn").forEach(a=>{a.addEventListener("click",()=>{const i=a.dataset.tab;c(i)})})}function c(e){const a=document.querySelectorAll(".tab-btn"),i=document.querySelectorAll(".tab-pane");a.forEach(l=>{l.classList.remove("active"),l.setAttribute("aria-selected","false")});const s=document.querySelector(`[data-tab="${e}"]`);s&&(s.classList.add("active"),s.setAttribute("aria-selected","true")),i.forEach(l=>{l.classList.remove("active"),l.setAttribute("aria-hidden","true")});const u=document.getElementById(`${e}-tab`);u&&(u.classList.add("active"),u.setAttribute("aria-hidden","false")),n===P.TABS.ATAK&&e===P.TABS.ITAK?o():n===P.TABS.ITAK&&e===P.TABS.ATAK&&t(),n=e}function o(){const e=document.getElementById("atak-host");if(!e?.value.trim())return;const a=document.getElementById("itak-url");a?.value.trim()||(a.value=`https://${e.value.trim()}`,O.updateiTAKQR(),N.showDataStatus("itak"),N.showNotification("Server URL copied from ATAK tab","info"))}function t(){const e=document.getElementById("itak-url");if(!e?.value.trim())return;const a=X(e.value);if(a){const i=document.getElementById("atak-host");i?.value.trim()||(i.value=a,O.updateATAKQR(),N.showDataStatus("atak"),N.showNotification("Server hostname copied from iTAK tab","info"))}}return{init:r,switchTab:c,getCurrentTab:()=>n}}(),O=function(){async function n(i,s){const u=document.getElementById(s);if(!u)return null;if(!i)return u.innerHTML='<div class="qr-placeholder">Enter configuration details above</div>',u.setAttribute("aria-label","QR code will appear here when form is complete"),null;try{const l=await Ke.toCanvas(i,{width:P.QR_SIZE,margin:P.QR_MARGIN,color:{dark:"#000000",light:"#FFFFFF"}}),m=u.querySelector(".qr-placeholder");m&&m.remove();const d=u.querySelector("canvas");return u.setAttribute("aria-label","QR code generated successfully"),l&&typeof l=="object"&&l.nodeType===1&&(l.style.opacity="0",u.appendChild(l),l.offsetHeight,l.style.opacity="1",d&&(d.style.opacity="0",d.addEventListener("transitionend",()=>d.remove(),{once:!0}))),l}catch(l){return console.error(M.QR_GENERATION_ERROR,l),N.showNotification(M.QR_GENERATION_ERROR,"error"),null}}async function r(){const i=document.getElementById("atak-host")?.value||"",s=document.getElementById("atak-username")?.value||"",u=document.getElementById("atak-token")?.value||"";if(i.trim()&&s.trim()&&u.trim()){if(!ae(i.trim())){N.showNotification(M.INVALID_HOSTNAME,"error"),n(null,"atak-qr"),N.disableButtons("atak");return}const l=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(i.trim())}&username=${encodeURIComponent(s.trim())}&token=${encodeURIComponent(u.trim())}`;await n(l,"atak-qr"),N.enableButtons("atak");const m=document.getElementById("atak-qr");m&&(m.dataset.uri=l)}else await n(null,"atak-qr"),N.disableButtons("atak")}const c=vt(r,P.DEBOUNCE_DELAY);async function o(){const i=document.getElementById("itak-description")?.value||"",s=document.getElementById("itak-url")?.value||"",u=document.getElementById("itak-port")?.value||"",l=document.getElementById("itak-protocol")?.value||"",m=X(s),d=l===P.PROTOCOLS.HTTPS?P.PROTOCOLS.SSL:P.PROTOCOLS.TCP;if([i,m,u].every(h=>h&&h.trim()!=="")){if(!ae(m)){N.showNotification(M.INVALID_HOSTNAME,"error"),n(null,"itak-qr"),N.disableButtons("itak");return}if(!Fe(u)){N.showNotification(M.INVALID_PORT,"error"),n(null,"itak-qr"),N.disableButtons("itak");return}const h=`${i.trim()},${m},${u.trim()},${d}`;await n(h,"itak-qr"),N.enableButtons("itak");const b=document.getElementById("itak-qr");b&&(b.dataset.uri=h)}else await n(null,"itak-qr"),N.disableButtons("itak")}const t=vt(o,P.DEBOUNCE_DELAY);async function e(){const i=document.getElementById("import-url")?.value||"";if(i.trim()){if(!He(i.trim())){N.showNotification(M.INVALID_URL,"error"),n(null,"import-qr"),N.disableButtons("import");return}const s=`tak://com.atakmap.app/import?url=${encodeURIComponent(i.trim())}`;await n(s,"import-qr"),N.enableButtons("import");const u=document.getElementById("import-qr");u&&(u.dataset.uri=s)}else await n(null,"import-qr"),N.disableButtons("import")}const a=vt(e,P.DEBOUNCE_DELAY);return{updateATAKQR:c,updateiTAKQR:t,updateImportQR:a,updateATAKQRCore:r,updateiTAKQRCore:o,updateImportQRCore:e}}(),G=function(){let n=[];function r(){c(),document.getElementById("save-profile")?.addEventListener("click",u),document.getElementById("load-profile")?.addEventListener("click",l)}function c(){try{n=JSON.parse(localStorage.getItem(P.STORAGE_KEY)||"[]"),s()}catch(d){console.error(M.LOAD_PROFILES_ERROR,d),n=[]}}function o(){try{localStorage.setItem(P.STORAGE_KEY,JSON.stringify(n))}catch(d){console.error("Error saving profiles:",d),N.showNotification("Error saving profiles","error")}}function t(){const d=_.getCurrentTab(),f={type:d,timestamp:Date.now()};switch(d){case P.TABS.ATAK:{const g=document.getElementById("atak-host")?.value||"",h=document.getElementById("atak-username")?.value||"",b=document.getElementById("atak-token")?.value||"";Object.assign(f,{host:g,username:h,token:b});break}case P.TABS.ITAK:{const g=document.getElementById("itak-description")?.value||"",h=document.getElementById("itak-url")?.value||"",b=document.getElementById("itak-port")?.value||"",B=document.getElementById("itak-protocol")?.value||"";Object.assign(f,{description:g,url:h,port:b,protocol:B});break}case P.TABS.IMPORT:{const g=document.getElementById("import-url")?.value||"";Object.assign(f,{url:g});break}}return f}function e(){const d=document.getElementById("profile-name"),f=document.getElementById("profile-description"),g=d?.value.trim()||"",h=f?.value.trim()||"",b=H(g),B=H(h);if(!b){N.showNotification(M.PROFILE_NAME_REQUIRED,"error");return}const S=t();S.name=b,S.description=B;const C=n.findIndex(R=>R.name===b);if(C>=0){if(!confirm(M.PROFILE_EXISTS))return;n[C]=S}else n.push(S);o(),s(),J.closeModal(),N.showNotification("Profile saved successfully!","success")}function a(d){if(d){switch(d.type){case P.TABS.ATAK:{const f=document.getElementById("atak-host"),g=document.getElementById("atak-username"),h=document.getElementById("atak-token");f&&(f.value=d.host||""),g&&(g.value=d.username||""),h&&(h.value=d.token||""),O.updateATAKQR(),_.switchTab(P.TABS.ATAK);break}case P.TABS.ITAK:{const f=document.getElementById("itak-description"),g=document.getElementById("itak-url"),h=document.getElementById("itak-port"),b=document.getElementById("itak-protocol");f&&(f.value=d.description||""),g&&(g.value=d.url||""),h&&(h.value=d.port||"8089"),b&&(b.value=d.protocol||P.PROTOCOLS.HTTPS),O.updateiTAKQR(),_.switchTab(P.TABS.ITAK);break}case P.TABS.IMPORT:{const f=document.getElementById("import-url");f&&(f.value=d.url||""),O.updateImportQR(),_.switchTab(P.TABS.IMPORT);break}}J.closeModal(),N.showNotification("Profile loaded successfully!","success")}}function i(d){confirm(`Are you sure you want to delete the profile "${d}"?`)&&(n=n.filter(f=>f.name!==d),o(),s(),N.showNotification("Profile deleted successfully!","success"))}function s(){const d=document.getElementById("profiles-container");if(d){if(n.length===0){d.innerHTML='<p style="grid-column: 1 / -1; color: var(--text-secondary);">No saved profiles yet. Create your first profile to get started.</p>';return}d.innerHTML=n.map(f=>{const g=JSON.stringify(f).replace(/"/g,"&quot;");return`
        <div class="profile-card">
          <h4>${H(f.name)}</h4>
          <p>${H(f.description||"No description")}</p>
          <p><strong>Type:</strong> ${f.type.toUpperCase()}</p>
          <p><strong>Created:</strong> ${new Date(f.timestamp).toLocaleDateString()}</p>
          <div class="profile-actions">
            <button class="btn btn-primary" onclick="ProfileManager.loadProfile(${g})">Load</button>
            <button class="btn btn-secondary" onclick="ProfileManager.deleteProfile('${H(f.name)}')">Delete</button>
          </div>
        </div>
      `}).join("")}}function u(){const d=document.getElementById("modal-title"),f=document.getElementById("profile-name"),g=document.getElementById("profile-description");d&&(d.textContent="Save Profile");const h=t();f&&(f.value=h.name||""),g&&(g.value=h.description||""),J.openModal()}function l(){const d=document.getElementById("modal-title");d&&(d.textContent="Load Profile"),m(),J.openModal()}function m(){const d=document.querySelector(".modal-body");if(!d||n.length===0){d&&(d.innerHTML="<p>No profiles available to load.</p>");return}d.innerHTML=`
      <div class="profile-selection">
        <p>Select a profile to load:</p>
        <div class="profile-list" role="list">
          ${n.map(f=>{const g=JSON.stringify(f).replace(/"/g,"&quot;");return`
              <div class="profile-item" role="listitem" tabindex="0"
                   onclick="ProfileManager.loadProfile(${g})"
                   onkeypress="if(event.key === 'Enter') ProfileManager.loadProfile(${g})">
                <h4>${H(f.name)}</h4>
                <p>${H(f.description||"No description")}</p>
                <span class="profile-type">${f.type.toUpperCase()}</span>
              </div>
            `}).join("")}
        </div>
      </div>
    `}return{init:r,saveProfile:e,loadProfile:a,deleteProfile:i}}(),N=function(){function n(a,i="info"){document.querySelectorAll(".notification").forEach(l=>l.remove());const u=document.createElement("div");u.className=`notification notification-${i}`,u.textContent=a,u.setAttribute("role","alert"),u.setAttribute("aria-live","polite"),document.body.appendChild(u),u.offsetHeight,u.classList.add("notification-show"),setTimeout(()=>{u.classList.remove("notification-show"),u.classList.add("notification-hide"),setTimeout(()=>u.remove(),300)},P.NOTIFICATION_DURATION)}function r(a){const i=document.getElementById(`${a}-data-status`);i&&(i.style.display="flex",setTimeout(()=>{i.style.display="none"},P.STATUS_DURATION))}function c(a){const i=document.getElementById(`${a}-download`),s=document.getElementById(`${a}-copy`);i&&(i.disabled=!1),s&&(s.disabled=!1)}function o(a){const i=document.getElementById(`${a}-download`),s=document.getElementById(`${a}-copy`);i&&(i.disabled=!0),s&&(s.disabled=!0)}async function t(a){const s=document.getElementById(`${a}-qr`)?.querySelector("canvas");if(s)try{const u=document.createElement("a");u.download=`tak-${a}-config.png`,u.href=s.toDataURL(),u.click()}catch(u){console.error(M.DOWNLOAD_ERROR,u),n(M.DOWNLOAD_ERROR,"error")}}async function e(a){let i="";switch(a){case P.TABS.ATAK:{const s=document.getElementById("atak-host")?.value||"",u=document.getElementById("atak-username")?.value||"",l=document.getElementById("atak-token")?.value||"";i=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(s.trim())}&username=${encodeURIComponent(u.trim())}&token=${encodeURIComponent(l.trim())}`;break}case P.TABS.ITAK:{const s=document.getElementById("itak-description")?.value||"",u=document.getElementById("itak-url")?.value||"",l=document.getElementById("itak-port")?.value||"",m=document.getElementById("itak-protocol")?.value||"",d=X(u),f=m===P.PROTOCOLS.HTTPS?P.PROTOCOLS.SSL:P.PROTOCOLS.TCP;i=`${s.trim()},${d},${l.trim()},${f}`;break}case P.TABS.IMPORT:{const s=document.getElementById("import-url")?.value||"";i=`tak://com.atakmap.app/import?url=${encodeURIComponent(s.trim())}`;break}}try{await navigator.clipboard.writeText(i),n("URI copied to clipboard!","success")}catch(s){console.error(M.CLIPBOARD_ERROR,s),n(M.CLIPBOARD_ERROR,"error")}}return{showNotification:n,showDataStatus:r,enableButtons:c,disableButtons:o,downloadQR:t,copyURI:e}}(),kt=function(){function n(){r(),c(),o(),t()}function r(){const i=document.getElementById("atak-form");if(!i)return;i.querySelectorAll("input").forEach(u=>{u.setAttribute("aria-required","true"),u.addEventListener("input",()=>O.updateATAKQR())})}function c(){const i=document.getElementById("itak-form");if(!i)return;i.querySelectorAll("input, select").forEach(u=>{u.setAttribute("aria-required","true"),u.addEventListener("input",()=>O.updateiTAKQR())})}function o(){const i=document.getElementById("import-form");if(!i)return;i.querySelectorAll("input").forEach(u=>{u.setAttribute("aria-required","true"),u.addEventListener("input",()=>O.updateImportQR())})}function t(){document.addEventListener("click",i=>{const{target:s}=i;if(s.id?.endsWith("-download")){const u=s.id.replace("-download","");N.downloadQR(u)}if(s.id?.endsWith("-copy")){const u=s.id.replace("-copy","");N.copyURI(u)}})}function e(){const i=document.getElementById("atak-host")?.value||"",s=document.getElementById("atak-username")?.value||"",u=document.getElementById("atak-token")?.value||"";if(i.trim()){let l=i.trim(),m=P.PROTOCOLS.HTTPS;try{if(i.trim().includes("://")){const g=new URL(i.trim()),{hostname:h,protocol:b}=g;l=h,m=b.replace(":","")}}catch{}const d=document.getElementById("itak-url"),f=document.getElementById("itak-protocol");d&&(d.value=`${m}://${l}`),f&&(f.value=m)}if(s.trim()){const l=document.getElementById("itak-username");l&&(l.value=s.trim())}if(u.trim()){const l=document.getElementById("itak-token");l&&(l.value=u.trim())}O.updateiTAKQR()}function a(){const i=document.getElementById("itak-url")?.value||"",s=document.getElementById("itak-username")?.value||"",u=document.getElementById("itak-token")?.value||"";if(i.trim()){const l=X(i);if(l){const m=document.getElementById("atak-host");m&&(m.value=l)}}if(s.trim()){const l=document.getElementById("atak-username");l&&(l.value=s.trim())}if(u.trim()){const l=document.getElementById("atak-token");l&&(l.value=u.trim())}O.updateATAKQR()}return{init:n,populateiTAKFromATAK:e,populateATAKFromiTAK:a}}(),J=function(){let n;function r(){if(n=document.getElementById("profile-modal"),!n)return;const t=n.querySelector(".modal-close"),e=document.getElementById("modal-cancel"),a=document.getElementById("modal-save");t?.addEventListener("click",o),e?.addEventListener("click",o),a?.addEventListener("click",G.saveProfile),n.addEventListener("click",i=>{i.target===n&&o()}),document.addEventListener("keydown",i=>{i.key==="Escape"&&n.classList.contains("active")&&o()})}function c(){n&&(n.classList.add("active"),n.setAttribute("aria-modal","true"),setTimeout(()=>{n.querySelector("input, select, textarea")?.focus()},100))}function o(){n&&(n.classList.remove("active"),n.removeAttribute("aria-modal"))}return{init:r,openModal:c,closeModal:o}}(),$e=function(){function n(){document.getElementById("help-button")?.addEventListener("click",()=>_.switchTab(P.TABS.HELP)),document.addEventListener("keydown",o=>{o.key==="F1"&&(o.preventDefault(),_.switchTab(P.TABS.HELP))}),document.getElementById("back-to-top")?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}return{init:n}}(),ze=(()=>{const n="tak-theme";function r(){const e=localStorage.getItem(n);return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function c(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem(n,e);const a=e==="dark"?"#1e293b":"#1e40af";document.querySelector('meta[name="theme-color"]')?.setAttribute("content",a)}function o(){const a=r()==="light"?"dark":"light";c(a)}function t(){const e=r();c(e),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{localStorage.getItem(n)||c(i.matches?"dark":"light")});const a=document.getElementById("theme-toggle");a&&a.addEventListener("click",o)}return{init:t,toggleTheme:o,getCurrentTheme:r,applyTheme:c}})(),se=(()=>{const n="appVersion",r="3.0.2";async function c(){const o=document.getElementById("app-version"),t=document.getElementById("update-notice");o&&(o.textContent=`v${r}`);const e=localStorage.getItem(n);e&&e!==r&&N.showNotification(`Updated to version ${r}`,"success"),localStorage.setItem(n,r);try{const i=await(await fetch("version.json",{cache:"no-store"})).json();t&&(t.style.display=i.version!==r?"inline":"none")}catch{}}return{init:c}})();async function Qe(){ze.init(),_.init(),kt.init(),G.init(),J.init(),$e.init(),se.init(),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{se.init()})}document.addEventListener("DOMContentLoaded",Qe);window.updateATAKQR=O.updateATAKQRCore;window.updateiTAKQR=O.updateiTAKQRCore;window.updateImportQR=O.updateImportQRCore;window.populateiTAKFromATAK=kt.populateiTAKFromATAK;window.populateATAKFromiTAK=kt.populateATAKFromiTAK;window.transferDataFromATAKToiTAK=()=>_.switchTab(P.TABS.ITAK);window.transferDataFromiTAKToATAK=()=>_.switchTab(P.TABS.ATAK);window.showNotification=N.showNotification;window.loadProfile=G.loadProfile;window.deleteProfile=G.deleteProfile;window.ProfileManager=G;window.showDataStatus=N.showDataStatus;window.switchTab=_.switchTab;
