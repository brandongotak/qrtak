(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function c(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(t){if(t.ep)return;t.ep=!0;const e=c(t);fetch(t.href,e)}})();function ge(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var V={},ot,Nt;function he(){return Nt||(Nt=1,ot=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ot}var rt={},K={},Mt;function $(){if(Mt)return K;Mt=1;let n;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return K.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},K.getSymbolTotalCodewords=function(o){return r[o]},K.getBCHDigit=function(c){let o=0;for(;c!==0;)o++,c>>>=1;return o},K.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');n=o},K.isKanjiModeEnabled=function(){return typeof n<"u"},K.toSJIS=function(o){return n(o)},K}var it={},Ot;function vt(){return Ot||(Ot=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function r(c){if(typeof c!="string")throw new Error("Param is not a string");switch(c.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+c)}}n.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},n.from=function(o,t){if(n.isValid(o))return o;try{return r(o)}catch{return t}}}(it)),it}var at,Dt;function pe(){if(Dt)return at;Dt=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(r){const c=Math.floor(r/8);return(this.buffer[c]>>>7-r%8&1)===1},put:function(r,c){for(let o=0;o<c;o++)this.putBit((r>>>c-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const c=Math.floor(this.length/8);this.buffer.length<=c&&this.buffer.push(0),r&&(this.buffer[c]|=128>>>this.length%8),this.length++}},at=n,at}var st,_t;function Ee(){if(_t)return st;_t=1;function n(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return n.prototype.set=function(r,c,o,t){const e=r*this.size+c;this.data[e]=o,t&&(this.reservedBit[e]=!0)},n.prototype.get=function(r,c){return this.data[r*this.size+c]},n.prototype.xor=function(r,c,o){this.data[r*this.size+c]^=o},n.prototype.isReserved=function(r,c){return this.reservedBit[r*this.size+c]},st=n,st}var ct={},Ut;function ye(){return Ut||(Ut=1,function(n){const r=$().getSymbolSize;n.getRowColCoords=function(o){if(o===1)return[];const t=Math.floor(o/7)+2,e=r(o),a=e===145?26:Math.ceil((e-13)/(2*t-2))*2,i=[e-7];for(let s=1;s<t-1;s++)i[s]=i[s-1]-a;return i.push(6),i.reverse()},n.getPositions=function(o){const t=[],e=n.getRowColCoords(o),a=e.length;for(let i=0;i<a;i++)for(let s=0;s<a;s++)i===0&&s===0||i===0&&s===a-1||i===a-1&&s===0||t.push([e[i],e[s]]);return t}}(ct)),ct}var ut={},qt;function we(){if(qt)return ut;qt=1;const n=$().getSymbolSize,r=7;return ut.getPositions=function(o){const t=n(o);return[[0,0],[t-r,0],[0,t-r]]},ut}var lt={},Ft;function Ae(){return Ft||(Ft=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};n.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},n.from=function(t){return n.isValid(t)?parseInt(t,10):void 0},n.getPenaltyN1=function(t){const e=t.size;let a=0,i=0,s=0,u=null,l=null;for(let g=0;g<e;g++){i=s=0,u=l=null;for(let f=0;f<e;f++){let d=t.get(g,f);d===u?i++:(i>=5&&(a+=r.N1+(i-5)),u=d,i=1),d=t.get(f,g),d===l?s++:(s>=5&&(a+=r.N1+(s-5)),l=d,s=1)}i>=5&&(a+=r.N1+(i-5)),s>=5&&(a+=r.N1+(s-5))}return a},n.getPenaltyN2=function(t){const e=t.size;let a=0;for(let i=0;i<e-1;i++)for(let s=0;s<e-1;s++){const u=t.get(i,s)+t.get(i,s+1)+t.get(i+1,s)+t.get(i+1,s+1);(u===4||u===0)&&a++}return a*r.N2},n.getPenaltyN3=function(t){const e=t.size;let a=0,i=0,s=0;for(let u=0;u<e;u++){i=s=0;for(let l=0;l<e;l++)i=i<<1&2047|t.get(u,l),l>=10&&(i===1488||i===93)&&a++,s=s<<1&2047|t.get(l,u),l>=10&&(s===1488||s===93)&&a++}return a*r.N3},n.getPenaltyN4=function(t){let e=0;const a=t.data.length;for(let s=0;s<a;s++)e+=t.data[s];return Math.abs(Math.ceil(e*100/a/5)-10)*r.N4};function c(o,t,e){switch(o){case n.Patterns.PATTERN000:return(t+e)%2===0;case n.Patterns.PATTERN001:return t%2===0;case n.Patterns.PATTERN010:return e%3===0;case n.Patterns.PATTERN011:return(t+e)%3===0;case n.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2===0;case n.Patterns.PATTERN101:return t*e%2+t*e%3===0;case n.Patterns.PATTERN110:return(t*e%2+t*e%3)%2===0;case n.Patterns.PATTERN111:return(t*e%3+(t+e)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}n.applyMask=function(t,e){const a=e.size;for(let i=0;i<a;i++)for(let s=0;s<a;s++)e.isReserved(s,i)||e.xor(s,i,c(t,s,i))},n.getBestMask=function(t,e){const a=Object.keys(n.Patterns).length;let i=0,s=1/0;for(let u=0;u<a;u++){e(u),n.applyMask(u,t);const l=n.getPenaltyN1(t)+n.getPenaltyN2(t)+n.getPenaltyN3(t)+n.getPenaltyN4(t);n.applyMask(u,t),l<s&&(s=l,i=u)}return i}}(lt)),lt}var W={},Kt;function se(){if(Kt)return W;Kt=1;const n=vt(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],c=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return W.getBlocksCount=function(t,e){switch(e){case n.L:return r[(t-1)*4+0];case n.M:return r[(t-1)*4+1];case n.Q:return r[(t-1)*4+2];case n.H:return r[(t-1)*4+3];default:return}},W.getTotalCodewordsCount=function(t,e){switch(e){case n.L:return c[(t-1)*4+0];case n.M:return c[(t-1)*4+1];case n.Q:return c[(t-1)*4+2];case n.H:return c[(t-1)*4+3];default:return}},W}var dt={},J={},Ht;function Te(){if(Ht)return J;Ht=1;const n=new Uint8Array(512),r=new Uint8Array(256);return function(){let o=1;for(let t=0;t<255;t++)n[t]=o,r[o]=t,o<<=1,o&256&&(o^=285);for(let t=255;t<512;t++)n[t]=n[t-255]}(),J.log=function(o){if(o<1)throw new Error("log("+o+")");return r[o]},J.exp=function(o){return n[o]},J.mul=function(o,t){return o===0||t===0?0:n[r[o]+r[t]]},J}var $t;function Ie(){return $t||($t=1,function(n){const r=Te();n.mul=function(o,t){const e=new Uint8Array(o.length+t.length-1);for(let a=0;a<o.length;a++)for(let i=0;i<t.length;i++)e[a+i]^=r.mul(o[a],t[i]);return e},n.mod=function(o,t){let e=new Uint8Array(o);for(;e.length-t.length>=0;){const a=e[0];for(let s=0;s<t.length;s++)e[s]^=r.mul(t[s],a);let i=0;for(;i<e.length&&e[i]===0;)i++;e=e.slice(i)}return e},n.generateECPolynomial=function(o){let t=new Uint8Array([1]);for(let e=0;e<o;e++)t=n.mul(t,new Uint8Array([1,r.exp(e)]));return t}}(dt)),dt}var ft,Qt;function Be(){if(Qt)return ft;Qt=1;const n=Ie();function r(c){this.genPoly=void 0,this.degree=c,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(o){this.degree=o,this.genPoly=n.generateECPolynomial(this.degree)},r.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(o.length+this.degree);t.set(o);const e=n.mod(t,this.genPoly),a=this.degree-e.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(e,a),i}return e},ft=r,ft}var mt={},gt={},ht={},zt;function ce(){return zt||(zt=1,ht.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),ht}var D={},Vt;function ue(){if(Vt)return D;Vt=1;const n="[0-9]+",r="[A-Z $%*+\\-./:]+";let c="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";c=c.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+c+`)(?:.|[\r
]))+`;D.KANJI=new RegExp(c,"g"),D.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),D.BYTE=new RegExp(o,"g"),D.NUMERIC=new RegExp(n,"g"),D.ALPHANUMERIC=new RegExp(r,"g");const t=new RegExp("^"+c+"$"),e=new RegExp("^"+n+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return D.testKanji=function(s){return t.test(s)},D.testNumeric=function(s){return e.test(s)},D.testAlphanumeric=function(s){return a.test(s)},D}var jt;function Q(){return jt||(jt=1,function(n){const r=ce(),c=ue();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(e,a){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!r.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?e.ccBits[0]:a<27?e.ccBits[1]:e.ccBits[2]},n.getBestModeForData=function(e){return c.testNumeric(e)?n.NUMERIC:c.testAlphanumeric(e)?n.ALPHANUMERIC:c.testKanji(e)?n.KANJI:n.BYTE},n.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},n.isValid=function(e){return e&&e.bit&&e.ccBits};function o(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+t)}}n.from=function(e,a){if(n.isValid(e))return e;try{return o(e)}catch{return a}}}(gt)),gt}var Jt;function Re(){return Jt||(Jt=1,function(n){const r=$(),c=se(),o=vt(),t=Q(),e=ce(),a=7973,i=r.getBCHDigit(a);function s(f,d,m){for(let h=1;h<=40;h++)if(d<=n.getCapacity(h,m,f))return h}function u(f,d){return t.getCharCountIndicator(f,d)+4}function l(f,d){let m=0;return f.forEach(function(h){const b=u(h.mode,d);m+=b+h.getBitsLength()}),m}function g(f,d){for(let m=1;m<=40;m++)if(l(f,m)<=n.getCapacity(m,d,t.MIXED))return m}n.from=function(d,m){return e.isValid(d)?parseInt(d,10):m},n.getCapacity=function(d,m,h){if(!e.isValid(d))throw new Error("Invalid QR Code version");typeof h>"u"&&(h=t.BYTE);const b=r.getSymbolTotalCodewords(d),B=c.getTotalCodewordsCount(d,m),v=(b-B)*8;if(h===t.MIXED)return v;const C=v-u(h,d);switch(h){case t.NUMERIC:return Math.floor(C/10*3);case t.ALPHANUMERIC:return Math.floor(C/11*2);case t.KANJI:return Math.floor(C/13);case t.BYTE:default:return Math.floor(C/8)}},n.getBestVersionForData=function(d,m){let h;const b=o.from(m,o.M);if(Array.isArray(d)){if(d.length>1)return g(d,b);if(d.length===0)return 1;h=d[0]}else h=d;return s(h.mode,h.getLength(),b)},n.getEncodedBits=function(d){if(!e.isValid(d)||d<7)throw new Error("Invalid QR Code version");let m=d<<12;for(;r.getBCHDigit(m)-i>=0;)m^=a<<r.getBCHDigit(m)-i;return d<<12|m}}(mt)),mt}var pt={},Yt;function Ce(){if(Yt)return pt;Yt=1;const n=$(),r=1335,c=21522,o=n.getBCHDigit(r);return pt.getEncodedBits=function(e,a){const i=e.bit<<3|a;let s=i<<10;for(;n.getBCHDigit(s)-o>=0;)s^=r<<n.getBCHDigit(s)-o;return(i<<10|s)^c},pt}var Et={},yt,Gt;function Se(){if(Gt)return yt;Gt=1;const n=Q();function r(c){this.mode=n.NUMERIC,this.data=c.toString()}return r.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){let t,e,a;for(t=0;t+3<=this.data.length;t+=3)e=this.data.substr(t,3),a=parseInt(e,10),o.put(a,10);const i=this.data.length-t;i>0&&(e=this.data.substr(t),a=parseInt(e,10),o.put(a,i*3+1))},yt=r,yt}var wt,Zt;function ve(){if(Zt)return wt;Zt=1;const n=Q(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function c(o){this.mode=n.ALPHANUMERIC,this.data=o}return c.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let a=r.indexOf(this.data[e])*45;a+=r.indexOf(this.data[e+1]),t.put(a,11)}this.data.length%2&&t.put(r.indexOf(this.data[e]),6)},wt=c,wt}var At,Wt;function ke(){if(Wt)return At;Wt=1;const n=Q();function r(c){this.mode=n.BYTE,typeof c=="string"?this.data=new TextEncoder().encode(c):this.data=new Uint8Array(c)}return r.getBitsLength=function(o){return o*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(c){for(let o=0,t=this.data.length;o<t;o++)c.put(this.data[o],8)},At=r,At}var Tt,Xt;function Pe(){if(Xt)return Tt;Xt=1;const n=Q(),r=$();function c(o){this.mode=n.KANJI,this.data=o}return c.getBitsLength=function(t){return t*13},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(o){let t;for(t=0;t<this.data.length;t++){let e=r.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),o.put(e,13)}},Tt=c,Tt}var It={exports:{}},xt;function be(){return xt||(xt=1,function(n){var r={single_source_shortest_paths:function(c,o,t){var e={},a={};a[o]=0;var i=r.PriorityQueue.make();i.push(o,0);for(var s,u,l,g,f,d,m,h,b;!i.empty();){s=i.pop(),u=s.value,g=s.cost,f=c[u]||{};for(l in f)f.hasOwnProperty(l)&&(d=f[l],m=g+d,h=a[l],b=typeof a[l]>"u",(b||h>m)&&(a[l]=m,i.push(l,m),e[l]=u))}if(typeof t<"u"&&typeof a[t]>"u"){var B=["Could not find a path from ",o," to ",t,"."].join("");throw new Error(B)}return e},extract_shortest_path_from_predecessor_list:function(c,o){for(var t=[],e=o;e;)t.push(e),c[e],e=c[e];return t.reverse(),t},find_path:function(c,o,t){var e=r.single_source_shortest_paths(c,o,t);return r.extract_shortest_path_from_predecessor_list(e,t)},PriorityQueue:{make:function(c){var o=r.PriorityQueue,t={},e;c=c||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);return t.queue=[],t.sorter=c.sorter||o.default_sorter,t},default_sorter:function(c,o){return c.cost-o.cost},push:function(c,o){var t={value:c,cost:o};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=r}(It)),It.exports}var te;function Le(){return te||(te=1,function(n){const r=Q(),c=Se(),o=ve(),t=ke(),e=Pe(),a=ue(),i=$(),s=be();function u(B){return unescape(encodeURIComponent(B)).length}function l(B,v,C){const R=[];let N;for(;(N=B.exec(C))!==null;)R.push({data:N[0],index:N.index,mode:v,length:N[0].length});return R}function g(B){const v=l(a.NUMERIC,r.NUMERIC,B),C=l(a.ALPHANUMERIC,r.ALPHANUMERIC,B);let R,N;return i.isKanjiModeEnabled()?(R=l(a.BYTE,r.BYTE,B),N=l(a.KANJI,r.KANJI,B)):(R=l(a.BYTE_KANJI,r.BYTE,B),N=[]),v.concat(C,R,N).sort(function(T,A){return T.index-A.index}).map(function(T){return{data:T.data,mode:T.mode,length:T.length}})}function f(B,v){switch(v){case r.NUMERIC:return c.getBitsLength(B);case r.ALPHANUMERIC:return o.getBitsLength(B);case r.KANJI:return e.getBitsLength(B);case r.BYTE:return t.getBitsLength(B)}}function d(B){return B.reduce(function(v,C){const R=v.length-1>=0?v[v.length-1]:null;return R&&R.mode===C.mode?(v[v.length-1].data+=C.data,v):(v.push(C),v)},[])}function m(B){const v=[];for(let C=0;C<B.length;C++){const R=B[C];switch(R.mode){case r.NUMERIC:v.push([R,{data:R.data,mode:r.ALPHANUMERIC,length:R.length},{data:R.data,mode:r.BYTE,length:R.length}]);break;case r.ALPHANUMERIC:v.push([R,{data:R.data,mode:r.BYTE,length:R.length}]);break;case r.KANJI:v.push([R,{data:R.data,mode:r.BYTE,length:u(R.data)}]);break;case r.BYTE:v.push([{data:R.data,mode:r.BYTE,length:u(R.data)}])}}return v}function h(B,v){const C={},R={start:{}};let N=["start"];for(let E=0;E<B.length;E++){const T=B[E],A=[];for(let p=0;p<T.length;p++){const S=T[p],y=""+E+p;A.push(y),C[y]={node:S,lastCount:0},R[y]={};for(let I=0;I<N.length;I++){const w=N[I];C[w]&&C[w].node.mode===S.mode?(R[w][y]=f(C[w].lastCount+S.length,S.mode)-f(C[w].lastCount,S.mode),C[w].lastCount+=S.length):(C[w]&&(C[w].lastCount=S.length),R[w][y]=f(S.length,S.mode)+4+r.getCharCountIndicator(S.mode,v))}}N=A}for(let E=0;E<N.length;E++)R[N[E]].end=0;return{map:R,table:C}}function b(B,v){let C;const R=r.getBestModeForData(B);if(C=r.from(v,R),C!==r.BYTE&&C.bit<R.bit)throw new Error('"'+B+'" cannot be encoded with mode '+r.toString(C)+`.
 Suggested mode is: `+r.toString(R));switch(C===r.KANJI&&!i.isKanjiModeEnabled()&&(C=r.BYTE),C){case r.NUMERIC:return new c(B);case r.ALPHANUMERIC:return new o(B);case r.KANJI:return new e(B);case r.BYTE:return new t(B)}}n.fromArray=function(v){return v.reduce(function(C,R){return typeof R=="string"?C.push(b(R,null)):R.data&&C.push(b(R.data,R.mode)),C},[])},n.fromString=function(v,C){const R=g(v,i.isKanjiModeEnabled()),N=m(R),E=h(N,C),T=s.find_path(E.map,"start","end"),A=[];for(let p=1;p<T.length-1;p++)A.push(E.table[T[p]].node);return n.fromArray(d(A))},n.rawSplit=function(v){return n.fromArray(g(v,i.isKanjiModeEnabled()))}}(Et)),Et}var ee;function Ne(){if(ee)return rt;ee=1;const n=$(),r=vt(),c=pe(),o=Ee(),t=ye(),e=we(),a=Ae(),i=se(),s=Be(),u=Re(),l=Ce(),g=Q(),f=Le();function d(E,T){const A=E.size,p=e.getPositions(T);for(let S=0;S<p.length;S++){const y=p[S][0],I=p[S][1];for(let w=-1;w<=7;w++)if(!(y+w<=-1||A<=y+w))for(let k=-1;k<=7;k++)I+k<=-1||A<=I+k||(w>=0&&w<=6&&(k===0||k===6)||k>=0&&k<=6&&(w===0||w===6)||w>=2&&w<=4&&k>=2&&k<=4?E.set(y+w,I+k,!0,!0):E.set(y+w,I+k,!1,!0))}}function m(E){const T=E.size;for(let A=8;A<T-8;A++){const p=A%2===0;E.set(A,6,p,!0),E.set(6,A,p,!0)}}function h(E,T){const A=t.getPositions(T);for(let p=0;p<A.length;p++){const S=A[p][0],y=A[p][1];for(let I=-2;I<=2;I++)for(let w=-2;w<=2;w++)I===-2||I===2||w===-2||w===2||I===0&&w===0?E.set(S+I,y+w,!0,!0):E.set(S+I,y+w,!1,!0)}}function b(E,T){const A=E.size,p=u.getEncodedBits(T);let S,y,I;for(let w=0;w<18;w++)S=Math.floor(w/3),y=w%3+A-8-3,I=(p>>w&1)===1,E.set(S,y,I,!0),E.set(y,S,I,!0)}function B(E,T,A){const p=E.size,S=l.getEncodedBits(T,A);let y,I;for(y=0;y<15;y++)I=(S>>y&1)===1,y<6?E.set(y,8,I,!0):y<8?E.set(y+1,8,I,!0):E.set(p-15+y,8,I,!0),y<8?E.set(8,p-y-1,I,!0):y<9?E.set(8,15-y-1+1,I,!0):E.set(8,15-y-1,I,!0);E.set(p-8,8,1,!0)}function v(E,T){const A=E.size;let p=-1,S=A-1,y=7,I=0;for(let w=A-1;w>0;w-=2)for(w===6&&w--;;){for(let k=0;k<2;k++)if(!E.isReserved(S,w-k)){let F=!1;I<T.length&&(F=(T[I]>>>y&1)===1),E.set(S,w-k,F),y--,y===-1&&(I++,y=7)}if(S+=p,S<0||A<=S){S-=p,p=-p;break}}}function C(E,T,A){const p=new c;A.forEach(function(k){p.put(k.mode.bit,4),p.put(k.getLength(),g.getCharCountIndicator(k.mode,E)),k.write(p)});const S=n.getSymbolTotalCodewords(E),y=i.getTotalCodewordsCount(E,T),I=(S-y)*8;for(p.getLengthInBits()+4<=I&&p.put(0,4);p.getLengthInBits()%8!==0;)p.putBit(0);const w=(I-p.getLengthInBits())/8;for(let k=0;k<w;k++)p.put(k%2?17:236,8);return R(p,E,T)}function R(E,T,A){const p=n.getSymbolTotalCodewords(T),S=i.getTotalCodewordsCount(T,A),y=p-S,I=i.getBlocksCount(T,A),w=p%I,k=I-w,F=Math.floor(p/I),j=Math.floor(y/I),de=j+1,Pt=F-j,fe=new s(Pt);let x=0;const Z=new Array(I),bt=new Array(I);let tt=0;const me=new Uint8Array(E.buffer);for(let z=0;z<I;z++){const nt=z<k?j:de;Z[z]=me.slice(x,x+nt),bt[z]=fe.encode(Z[z]),x+=nt,tt=Math.max(tt,nt)}const et=new Uint8Array(p);let Lt=0,U,q;for(U=0;U<tt;U++)for(q=0;q<I;q++)U<Z[q].length&&(et[Lt++]=Z[q][U]);for(U=0;U<Pt;U++)for(q=0;q<I;q++)et[Lt++]=bt[q][U];return et}function N(E,T,A,p){let S;if(Array.isArray(E))S=f.fromArray(E);else if(typeof E=="string"){let F=T;if(!F){const j=f.rawSplit(E);F=u.getBestVersionForData(j,A)}S=f.fromString(E,F||40)}else throw new Error("Invalid data");const y=u.getBestVersionForData(S,A);if(!y)throw new Error("The amount of data is too big to be stored in a QR Code");if(!T)T=y;else if(T<y)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+y+`.
`);const I=C(T,A,S),w=n.getSymbolSize(T),k=new o(w);return d(k,T),m(k),h(k,T),B(k,A,0),T>=7&&b(k,T),v(k,I),isNaN(p)&&(p=a.getBestMask(k,B.bind(null,k,A))),a.applyMask(p,k),B(k,A,p),{modules:k,version:T,errorCorrectionLevel:A,maskPattern:p,segments:S}}return rt.create=function(T,A){if(typeof T>"u"||T==="")throw new Error("No input text");let p=r.M,S,y;return typeof A<"u"&&(p=r.from(A.errorCorrectionLevel,r.M),S=u.from(A.version),y=a.from(A.maskPattern),A.toSJISFunc&&n.setToSJISFunction(A.toSJISFunc)),N(T,S,p,y)},rt}var Bt={},Rt={},ne;function le(){return ne||(ne=1,function(n){function r(c){if(typeof c=="number"&&(c=c.toString()),typeof c!="string")throw new Error("Color should be defined as hex string");let o=c.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+c);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(e){return[e,e]}))),o.length===6&&o.push("F","F");const t=parseInt(o.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+o.slice(0,6).join("")}}n.getOptions=function(o){o||(o={}),o.color||(o.color={});const t=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,e=o.width&&o.width>=21?o.width:void 0,a=o.scale||4;return{width:e,scale:e?4:a,margin:t,color:{dark:r(o.color.dark||"#000000ff"),light:r(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},n.getScale=function(o,t){return t.width&&t.width>=o+t.margin*2?t.width/(o+t.margin*2):t.scale},n.getImageWidth=function(o,t){const e=n.getScale(o,t);return Math.floor((o+t.margin*2)*e)},n.qrToImageData=function(o,t,e){const a=t.modules.size,i=t.modules.data,s=n.getScale(a,e),u=Math.floor((a+e.margin*2)*s),l=e.margin*s,g=[e.color.light,e.color.dark];for(let f=0;f<u;f++)for(let d=0;d<u;d++){let m=(f*u+d)*4,h=e.color.light;if(f>=l&&d>=l&&f<u-l&&d<u-l){const b=Math.floor((f-l)/s),B=Math.floor((d-l)/s);h=g[i[b*a+B]?1:0]}o[m++]=h.r,o[m++]=h.g,o[m++]=h.b,o[m]=h.a}}}(Rt)),Rt}var oe;function Me(){return oe||(oe=1,function(n){const r=le();function c(t,e,a){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=a,e.width=a,e.style.height=a+"px",e.style.width=a+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(e,a,i){let s=i,u=a;typeof s>"u"&&(!a||!a.getContext)&&(s=a,a=void 0),a||(u=o()),s=r.getOptions(s);const l=r.getImageWidth(e.modules.size,s),g=u.getContext("2d"),f=g.createImageData(l,l);return r.qrToImageData(f.data,e,s),c(g,u,l),g.putImageData(f,0,0),u},n.renderToDataURL=function(e,a,i){let s=i;typeof s>"u"&&(!a||!a.getContext)&&(s=a,a=void 0),s||(s={});const u=n.render(e,a,s),l=s.type||"image/png",g=s.rendererOpts||{};return u.toDataURL(l,g.quality)}}(Bt)),Bt}var Ct={},re;function Oe(){if(re)return Ct;re=1;const n=le();function r(t,e){const a=t.a/255,i=e+'="'+t.hex+'"';return a<1?i+" "+e+'-opacity="'+a.toFixed(2).slice(1)+'"':i}function c(t,e,a){let i=t+e;return typeof a<"u"&&(i+=" "+a),i}function o(t,e,a){let i="",s=0,u=!1,l=0;for(let g=0;g<t.length;g++){const f=Math.floor(g%e),d=Math.floor(g/e);!f&&!u&&(u=!0),t[g]?(l++,g>0&&f>0&&t[g-1]||(i+=u?c("M",f+a,.5+d+a):c("m",s,0),s=0,u=!1),f+1<e&&t[g+1]||(i+=c("h",l),l=0)):s++}return i}return Ct.render=function(e,a,i){const s=n.getOptions(a),u=e.modules.size,l=e.modules.data,g=u+s.margin*2,f=s.color.light.a?"<path "+r(s.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",d="<path "+r(s.color.dark,"stroke")+' d="'+o(l,u,s.margin)+'"/>',m='viewBox="0 0 '+g+" "+g+'"',b='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+m+' shape-rendering="crispEdges">'+f+d+`</svg>
`;return typeof i=="function"&&i(null,b),b},Ct}var ie;function De(){if(ie)return V;ie=1;const n=he(),r=Ne(),c=Me(),o=Oe();function t(e,a,i,s,u){const l=[].slice.call(arguments,1),g=l.length,f=typeof l[g-1]=="function";if(!f&&!n())throw new Error("Callback required as last argument");if(f){if(g<2)throw new Error("Too few arguments provided");g===2?(u=i,i=a,a=s=void 0):g===3&&(a.getContext&&typeof u>"u"?(u=s,s=void 0):(u=s,s=i,i=a,a=void 0))}else{if(g<1)throw new Error("Too few arguments provided");return g===1?(i=a,a=s=void 0):g===2&&!a.getContext&&(s=i,i=a,a=void 0),new Promise(function(d,m){try{const h=r.create(i,s);d(e(h,a,s))}catch(h){m(h)}})}try{const d=r.create(i,s);u(null,e(d,a,s))}catch(d){u(d)}}return V.create=r.create,V.toCanvas=t.bind(null,c.render),V.toDataURL=t.bind(null,c.renderToDataURL),V.toString=t.bind(null,function(e,a,i){return o.render(e,i)}),V}var _e=De();const Ue=ge(_e),P={STORAGE_KEY:"tak-profiles",TABS:{ATAK:"atak",ITAK:"itak",IMPORT:"import",PROFILES:"profiles",HELP:"help"},PROTOCOLS:{HTTPS:"https",HTTP:"http",SSL:"ssl",TCP:"tcp"},NOTIFICATION_DURATION:3e3,STATUS_DURATION:5e3,DEBOUNCE_DELAY:300,QR_SIZE:256,QR_MARGIN:2,PATTERNS:{HOSTNAME:/^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,60}[a-zA-Z0-9])?)*$/,PORT:/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,URL:/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)$/}},M={PROFILE_NAME_REQUIRED:"Profile name is required",PROFILE_EXISTS:"A profile with this name already exists. Do you want to overwrite it?",INVALID_HOSTNAME:"Please enter a valid hostname or IP address",INVALID_PORT:"Please enter a valid port number (1-65535)",INVALID_URL:"Please enter a valid URL",QR_GENERATION_ERROR:"Error generating QR code",DOWNLOAD_ERROR:"Error downloading QR code",CLIPBOARD_ERROR:"Error copying to clipboard",LOAD_PROFILES_ERROR:"Error loading profiles"};function St(n,r){let c;return function(...t){const e=()=>{clearTimeout(c),n.apply(this,t)};clearTimeout(c),c=setTimeout(e,r)}}function H(n){const r=document.createElement("div");return r.textContent=n,r.innerHTML}function X(n){if(!n||typeof n!="string")return"";try{const r=n.trim(),c=r.startsWith("http")?r:`https://${r}`;return new URL(c).hostname}catch{const r=n.trim().replace(/^https?:\/\//,"").split("/"),[c]=r,[o]=c.split(":");return o||""}}function ae(n){return n?/^(\d{1,3}\.){3}\d{1,3}$/.test(n)?n.split(".").every(o=>parseInt(o)>=0&&parseInt(o)<=255):P.PATTERNS.HOSTNAME.test(n):!1}function qe(n){return P.PATTERNS.PORT.test(String(n))}function Fe(n){try{return new URL(n),!0}catch{return!1}}const _=function(){let n=P.TABS.ATAK;function r(){document.querySelectorAll(".tab-btn").forEach(a=>{a.addEventListener("click",()=>{const i=a.dataset.tab;c(i)})})}function c(e){const a=document.querySelectorAll(".tab-btn"),i=document.querySelectorAll(".tab-pane");a.forEach(l=>{l.classList.remove("active"),l.setAttribute("aria-selected","false")});const s=document.querySelector(`[data-tab="${e}"]`);s&&(s.classList.add("active"),s.setAttribute("aria-selected","true")),i.forEach(l=>{l.classList.remove("active"),l.setAttribute("aria-hidden","true")});const u=document.getElementById(`${e}-tab`);u&&(u.classList.add("active"),u.setAttribute("aria-hidden","false")),n===P.TABS.ATAK&&e===P.TABS.ITAK?o():n===P.TABS.ITAK&&e===P.TABS.ATAK&&t(),n=e}function o(){const e=document.getElementById("atak-host");if(!e?.value.trim())return;const a=document.getElementById("itak-url");a?.value.trim()||(a.value=`https://${e.value.trim()}`,O.updateiTAKQR(),L.showDataStatus("itak"),L.showNotification("Server URL copied from ATAK tab","info"))}function t(){const e=document.getElementById("itak-url");if(!e?.value.trim())return;const a=X(e.value);if(a){const i=document.getElementById("atak-host");i?.value.trim()||(i.value=a,O.updateATAKQR(),L.showDataStatus("atak"),L.showNotification("Server hostname copied from iTAK tab","info"))}}return{init:r,switchTab:c,getCurrentTab:()=>n}}(),O=function(){async function n(i,s){const u=document.getElementById(s);if(!u)return null;if(!i)return u.innerHTML='<div class="qr-placeholder">Enter configuration details above</div>',u.setAttribute("aria-label","QR code will appear here when form is complete"),null;try{const l=await Ue.toCanvas(i,{width:P.QR_SIZE,margin:P.QR_MARGIN,color:{dark:"#000000",light:"#FFFFFF"}});return u.innerHTML="",u.setAttribute("aria-label","QR code generated successfully"),l&&typeof l=="object"&&l.nodeType===1&&u.appendChild(l),l}catch(l){return console.error(M.QR_GENERATION_ERROR,l),L.showNotification(M.QR_GENERATION_ERROR,"error"),null}}async function r(){const i=document.getElementById("atak-host")?.value||"",s=document.getElementById("atak-username")?.value||"",u=document.getElementById("atak-token")?.value||"";if(i.trim()&&s.trim()&&u.trim()){if(!ae(i.trim())){L.showNotification(M.INVALID_HOSTNAME,"error"),n(null,"atak-qr"),L.disableButtons("atak");return}const l=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(i.trim())}&username=${encodeURIComponent(s.trim())}&token=${encodeURIComponent(u.trim())}`;await n(l,"atak-qr"),L.enableButtons("atak");const g=document.getElementById("atak-qr");g&&(g.dataset.uri=l)}else await n(null,"atak-qr"),L.disableButtons("atak")}const c=St(r,P.DEBOUNCE_DELAY);async function o(){const i=document.getElementById("itak-description")?.value||"",s=document.getElementById("itak-url")?.value||"",u=document.getElementById("itak-port")?.value||"",l=document.getElementById("itak-protocol")?.value||"",g=X(s),f=l===P.PROTOCOLS.HTTPS?P.PROTOCOLS.SSL:P.PROTOCOLS.TCP;if([i,g,u].every(h=>h&&h.trim()!=="")){if(!ae(g)){L.showNotification(M.INVALID_HOSTNAME,"error"),n(null,"itak-qr"),L.disableButtons("itak");return}if(!qe(u)){L.showNotification(M.INVALID_PORT,"error"),n(null,"itak-qr"),L.disableButtons("itak");return}const h=`${i.trim()},${g},${u.trim()},${f}`;await n(h,"itak-qr"),L.enableButtons("itak");const b=document.getElementById("itak-qr");b&&(b.dataset.uri=h)}else await n(null,"itak-qr"),L.disableButtons("itak")}const t=St(o,P.DEBOUNCE_DELAY);async function e(){const i=document.getElementById("import-url")?.value||"";if(i.trim()){if(!Fe(i.trim())){L.showNotification(M.INVALID_URL,"error"),n(null,"import-qr"),L.disableButtons("import");return}const s=`tak://com.atakmap.app/import?url=${encodeURIComponent(i.trim())}`;await n(s,"import-qr"),L.enableButtons("import");const u=document.getElementById("import-qr");u&&(u.dataset.uri=s)}else await n(null,"import-qr"),L.disableButtons("import")}const a=St(e,P.DEBOUNCE_DELAY);return{updateATAKQR:c,updateiTAKQR:t,updateImportQR:a,updateATAKQRCore:r,updateiTAKQRCore:o,updateImportQRCore:e}}(),G=function(){let n=[];function r(){c(),document.getElementById("save-profile")?.addEventListener("click",u),document.getElementById("load-profile")?.addEventListener("click",l)}function c(){try{n=JSON.parse(localStorage.getItem(P.STORAGE_KEY)||"[]"),s()}catch(f){console.error(M.LOAD_PROFILES_ERROR,f),n=[]}}function o(){try{localStorage.setItem(P.STORAGE_KEY,JSON.stringify(n))}catch(f){console.error("Error saving profiles:",f),L.showNotification("Error saving profiles","error")}}function t(){const f=_.getCurrentTab(),d={type:f,timestamp:Date.now()};switch(f){case P.TABS.ATAK:{const m=document.getElementById("atak-host")?.value||"",h=document.getElementById("atak-username")?.value||"",b=document.getElementById("atak-token")?.value||"";Object.assign(d,{host:m,username:h,token:b});break}case P.TABS.ITAK:{const m=document.getElementById("itak-description")?.value||"",h=document.getElementById("itak-url")?.value||"",b=document.getElementById("itak-port")?.value||"",B=document.getElementById("itak-protocol")?.value||"";Object.assign(d,{description:m,url:h,port:b,protocol:B});break}case P.TABS.IMPORT:{const m=document.getElementById("import-url")?.value||"";Object.assign(d,{url:m});break}}return d}function e(){const f=document.getElementById("profile-name"),d=document.getElementById("profile-description"),m=f?.value.trim()||"",h=d?.value.trim()||"",b=H(m),B=H(h);if(!b){L.showNotification(M.PROFILE_NAME_REQUIRED,"error");return}const v=t();v.name=b,v.description=B;const C=n.findIndex(R=>R.name===b);if(C>=0){if(!confirm(M.PROFILE_EXISTS))return;n[C]=v}else n.push(v);o(),s(),Y.closeModal(),L.showNotification("Profile saved successfully!","success")}function a(f){if(f){switch(f.type){case P.TABS.ATAK:{const d=document.getElementById("atak-host"),m=document.getElementById("atak-username"),h=document.getElementById("atak-token");d&&(d.value=f.host||""),m&&(m.value=f.username||""),h&&(h.value=f.token||""),O.updateATAKQR(),_.switchTab(P.TABS.ATAK);break}case P.TABS.ITAK:{const d=document.getElementById("itak-description"),m=document.getElementById("itak-url"),h=document.getElementById("itak-port"),b=document.getElementById("itak-protocol");d&&(d.value=f.description||""),m&&(m.value=f.url||""),h&&(h.value=f.port||"8089"),b&&(b.value=f.protocol||P.PROTOCOLS.HTTPS),O.updateiTAKQR(),_.switchTab(P.TABS.ITAK);break}case P.TABS.IMPORT:{const d=document.getElementById("import-url");d&&(d.value=f.url||""),O.updateImportQR(),_.switchTab(P.TABS.IMPORT);break}}Y.closeModal(),L.showNotification("Profile loaded successfully!","success")}}function i(f){confirm(`Are you sure you want to delete the profile "${f}"?`)&&(n=n.filter(d=>d.name!==f),o(),s(),L.showNotification("Profile deleted successfully!","success"))}function s(){const f=document.getElementById("profiles-container");if(f){if(n.length===0){f.innerHTML='<p style="grid-column: 1 / -1; color: var(--text-secondary);">No saved profiles yet. Create your first profile to get started.</p>';return}f.innerHTML=n.map(d=>{const m=JSON.stringify(d).replace(/"/g,"&quot;");return`
        <div class="profile-card">
          <h4>${H(d.name)}</h4>
          <p>${H(d.description||"No description")}</p>
          <p><strong>Type:</strong> ${d.type.toUpperCase()}</p>
          <p><strong>Created:</strong> ${new Date(d.timestamp).toLocaleDateString()}</p>
          <div class="profile-actions">
            <button class="btn btn-primary" onclick="ProfileManager.loadProfile(${m})">Load</button>
            <button class="btn btn-secondary" onclick="ProfileManager.deleteProfile('${H(d.name)}')">Delete</button>
          </div>
        </div>
      `}).join("")}}function u(){const f=document.getElementById("modal-title"),d=document.getElementById("profile-name"),m=document.getElementById("profile-description");f&&(f.textContent="Save Profile");const h=t();d&&(d.value=h.name||""),m&&(m.value=h.description||""),Y.openModal()}function l(){const f=document.getElementById("modal-title");f&&(f.textContent="Load Profile"),g(),Y.openModal()}function g(){const f=document.querySelector(".modal-body");if(!f||n.length===0){f&&(f.innerHTML="<p>No profiles available to load.</p>");return}f.innerHTML=`
      <div class="profile-selection">
        <p>Select a profile to load:</p>
        <div class="profile-list" role="list">
          ${n.map(d=>{const m=JSON.stringify(d).replace(/"/g,"&quot;");return`
              <div class="profile-item" role="listitem" tabindex="0"
                   onclick="ProfileManager.loadProfile(${m})"
                   onkeypress="if(event.key === 'Enter') ProfileManager.loadProfile(${m})">
                <h4>${H(d.name)}</h4>
                <p>${H(d.description||"No description")}</p>
                <span class="profile-type">${d.type.toUpperCase()}</span>
              </div>
            `}).join("")}
        </div>
      </div>
    `}return{init:r,saveProfile:e,loadProfile:a,deleteProfile:i}}(),L=function(){function n(a,i="info"){document.querySelectorAll(".notification").forEach(l=>l.remove());const u=document.createElement("div");u.className=`notification notification-${i}`,u.textContent=a,u.setAttribute("role","alert"),u.setAttribute("aria-live","polite"),document.body.appendChild(u),u.offsetHeight,u.classList.add("notification-show"),setTimeout(()=>{u.classList.remove("notification-show"),u.classList.add("notification-hide"),setTimeout(()=>u.remove(),300)},P.NOTIFICATION_DURATION)}function r(a){const i=document.getElementById(`${a}-data-status`);i&&(i.style.display="flex",setTimeout(()=>{i.style.display="none"},P.STATUS_DURATION))}function c(a){const i=document.getElementById(`${a}-download`),s=document.getElementById(`${a}-copy`);i&&(i.disabled=!1),s&&(s.disabled=!1)}function o(a){const i=document.getElementById(`${a}-download`),s=document.getElementById(`${a}-copy`);i&&(i.disabled=!0),s&&(s.disabled=!0)}async function t(a){const s=document.getElementById(`${a}-qr`)?.querySelector("canvas");if(s)try{const u=document.createElement("a");u.download=`tak-${a}-config.png`,u.href=s.toDataURL(),u.click()}catch(u){console.error(M.DOWNLOAD_ERROR,u),n(M.DOWNLOAD_ERROR,"error")}}async function e(a){let i="";switch(a){case P.TABS.ATAK:{const s=document.getElementById("atak-host")?.value||"",u=document.getElementById("atak-username")?.value||"",l=document.getElementById("atak-token")?.value||"";i=`tak://com.atakmap.app/enroll?host=${encodeURIComponent(s.trim())}&username=${encodeURIComponent(u.trim())}&token=${encodeURIComponent(l.trim())}`;break}case P.TABS.ITAK:{const s=document.getElementById("itak-description")?.value||"",u=document.getElementById("itak-url")?.value||"",l=document.getElementById("itak-port")?.value||"",g=document.getElementById("itak-protocol")?.value||"",f=X(u),d=g===P.PROTOCOLS.HTTPS?P.PROTOCOLS.SSL:P.PROTOCOLS.TCP;i=`${s.trim()},${f},${l.trim()},${d}`;break}case P.TABS.IMPORT:{const s=document.getElementById("import-url")?.value||"";i=`tak://com.atakmap.app/import?url=${encodeURIComponent(s.trim())}`;break}}try{await navigator.clipboard.writeText(i),n("URI copied to clipboard!","success")}catch(s){console.error(M.CLIPBOARD_ERROR,s),n(M.CLIPBOARD_ERROR,"error")}}return{showNotification:n,showDataStatus:r,enableButtons:c,disableButtons:o,downloadQR:t,copyURI:e}}(),kt=function(){function n(){r(),c(),o(),t()}function r(){const i=document.getElementById("atak-form");if(!i)return;i.querySelectorAll("input").forEach(u=>{u.setAttribute("aria-required","true"),u.addEventListener("input",()=>O.updateATAKQR())})}function c(){const i=document.getElementById("itak-form");if(!i)return;i.querySelectorAll("input, select").forEach(u=>{u.setAttribute("aria-required","true"),u.addEventListener("input",()=>O.updateiTAKQR())})}function o(){const i=document.getElementById("import-form");if(!i)return;i.querySelectorAll("input").forEach(u=>{u.setAttribute("aria-required","true"),u.addEventListener("input",()=>O.updateImportQR())})}function t(){document.addEventListener("click",i=>{const{target:s}=i;if(s.id?.endsWith("-download")){const u=s.id.replace("-download","");L.downloadQR(u)}if(s.id?.endsWith("-copy")){const u=s.id.replace("-copy","");L.copyURI(u)}})}function e(){const i=document.getElementById("atak-host")?.value||"",s=document.getElementById("atak-username")?.value||"",u=document.getElementById("atak-token")?.value||"";if(i.trim()){let l=i.trim(),g=P.PROTOCOLS.HTTPS;try{if(i.trim().includes("://")){const m=new URL(i.trim()),{hostname:h,protocol:b}=m;l=h,g=b.replace(":","")}}catch{}const f=document.getElementById("itak-url"),d=document.getElementById("itak-protocol");f&&(f.value=`${g}://${l}`),d&&(d.value=g)}if(s.trim()){const l=document.getElementById("itak-username");l&&(l.value=s.trim())}if(u.trim()){const l=document.getElementById("itak-token");l&&(l.value=u.trim())}O.updateiTAKQR()}function a(){const i=document.getElementById("itak-url")?.value||"",s=document.getElementById("itak-username")?.value||"",u=document.getElementById("itak-token")?.value||"";if(i.trim()){const l=X(i);if(l){const g=document.getElementById("atak-host");g&&(g.value=l)}}if(s.trim()){const l=document.getElementById("atak-username");l&&(l.value=s.trim())}if(u.trim()){const l=document.getElementById("atak-token");l&&(l.value=u.trim())}O.updateATAKQR()}return{init:n,populateiTAKFromATAK:e,populateATAKFromiTAK:a}}(),Y=function(){let n;function r(){if(n=document.getElementById("profile-modal"),!n)return;const t=n.querySelector(".modal-close"),e=document.getElementById("modal-cancel"),a=document.getElementById("modal-save");t?.addEventListener("click",o),e?.addEventListener("click",o),a?.addEventListener("click",G.saveProfile),n.addEventListener("click",i=>{i.target===n&&o()}),document.addEventListener("keydown",i=>{i.key==="Escape"&&n.classList.contains("active")&&o()})}function c(){n&&(n.classList.add("active"),n.setAttribute("aria-modal","true"),setTimeout(()=>{n.querySelector("input, select, textarea")?.focus()},100))}function o(){n&&(n.classList.remove("active"),n.removeAttribute("aria-modal"))}return{init:r,openModal:c,closeModal:o}}(),Ke=function(){function n(){document.getElementById("help-button")?.addEventListener("click",()=>_.switchTab(P.TABS.HELP)),document.addEventListener("keydown",o=>{o.key==="F1"&&(o.preventDefault(),_.switchTab(P.TABS.HELP))}),document.getElementById("back-to-top")?.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}return{init:n}}(),He=(()=>{const n="tak-theme";function r(){const e=localStorage.getItem(n);return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}function c(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem(n,e);const a=e==="dark"?"#1e293b":"#1e40af";document.querySelector('meta[name="theme-color"]')?.setAttribute("content",a)}function o(){const a=r()==="light"?"dark":"light";c(a)}function t(){const e=r();c(e),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{localStorage.getItem(n)||c(i.matches?"dark":"light")});const a=document.getElementById("theme-toggle");a&&a.addEventListener("click",o)}return{init:t,toggleTheme:o,getCurrentTheme:r,applyTheme:c}})();async function $e(){He.init(),_.init(),kt.init(),G.init(),Y.init(),Ke.init()}document.addEventListener("DOMContentLoaded",$e);window.updateATAKQR=O.updateATAKQRCore;window.updateiTAKQR=O.updateiTAKQRCore;window.updateImportQR=O.updateImportQRCore;window.populateiTAKFromATAK=kt.populateiTAKFromATAK;window.populateATAKFromiTAK=kt.populateATAKFromiTAK;window.transferDataFromATAKToiTAK=()=>_.switchTab(P.TABS.ITAK);window.transferDataFromiTAKToATAK=()=>_.switchTab(P.TABS.ATAK);window.showNotification=L.showNotification;window.loadProfile=G.loadProfile;window.deleteProfile=G.deleteProfile;window.ProfileManager=G;window.showDataStatus=L.showDataStatus;window.switchTab=_.switchTab;
